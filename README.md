# SimpleMobSwitch

MinecraftのFabric Modで、モブスイッチ機能を提供します。モブキャップを利用してモブのスポーンを制御できます。

## 概要

SimpleMobSwitchは、Minecraftサーバーでモブのスポーンを一時的に停止するためのModです。大量のダミーモブ（シュルカー）をスポーンさせることで、モブキャップに達してその他のモブのスポーンを防ぎます。

## 機能

- **モブスイッチの有効化**: ダミーモブを70体スポーンさせ、新しいモブのスポーンを停止
- **モブスイッチの無効化**: ダミーモブを削除し、通常のモブスポーンを再開
- **永続化**: サーバー再起動後も設定が保持される
- **自動復旧**: サーバー再起動時にダミーモブが消失していた場合の自動再スポーン

## 必要環境

- Minecraft 1.20.x
- Fabric Loader
- Fabric API

## インストール

1. Fabric Loaderをインストール
2. Fabric APIをmodsフォルダに配置
3. SimpleMobSwitch.jarをmodsフォルダに配置
4. サーバーを起動

## 使用方法

### コマンド

すべてのコマンドはOP権限（権限レベル2以上）が必要です。

#### モブスイッチを有効化

```bash
/mobswitch on
```

- スポーンチャンクの周辺に70体のダミーモブ（シュルカー）をスポーン
- モブキャップに達し、新しいモブのスポーンが停止される

#### モブスイッチを無効化

```bash
/mobswitch off
```

- すべてのダミーモブを削除
- 通常のモブスポーンが再開される

## 技術仕様

### ダミーモブの特徴

- **エンティティタイプ**: シュルカー
- **配置場所**: スポーンチャンクから12チャンク離れた位置（Y=500）
- **数量**: 70体（モブキャップを満たすのに十分な数）
- **設定**:
  - AI無効
  - 無敵
  - 透明
  - 重力無効
  - 音無効
  - カスタム名: "MobSwitchDummy"（非表示）

### データ保存

- ワールドデータとして状態が保存される
- サーバー再起動後も設定が維持される
- ダミーモブのUUIDを追跡し、消失時は自動で再スポーン

## 注意事項

1. **パフォーマンス**: 70体のエンティティが常時存在するため、わずかなパフォーマンス影響があります
2. **モブファーム**: モブスイッチが有効な間、すべてのモブファームが機能しなくなります
3. **権限**: コマンドの実行にはOP権限が必要です
4. **互換性**: 他のモブ関連Modとの競合の可能性があります

## トラブルシューティング

### モブスイッチが効かない場合

1. ダミーモブが正しくスポーンされているか確認
2. 他のディメンション（ネザー、エンド）では効果がない可能性
3. 既存のモブが多すぎる場合は一度削除してから実行

### サーバー再起動後に無効になる場合

- 通常は自動で復旧されますが、手動で `/mobswitch on` を実行してください

## ライセンス

このModはMITライセンスの下で公開されています。

## 開発者向け情報

### ビルド方法

```bash
./gradlew build
```

### 主要クラス

- `SimpleMobSwitch.java`: メインクラス、コマンド登録とモブ管理
- `MobSwitchState.java`: 状態管理とデータ永続化

## 更新履歴

### v1.0.0

- 初回リリース
- 基本的なモブスイッチ機能
- 永続化機能
- 自動復旧機能

## サポート

問題や提案がある場合は、GitHubのIssuesページでお知らせください。
